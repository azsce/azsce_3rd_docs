# تمارين (۷) K

**٧-٦ اشرح كيف يمكن أن يستعمل نموذج المقطع الضوئي لقياس الوضع الزاوي.**

يمكن استخدام نموذج المقطع الضوئي لقياس الوضع الزاوي لمحور دوار باتباع الخطوات التالية:
1.  **تركيب قرص مشفر:** يُثبت قرص يحتوي على شقوق (فتحات) منتظمة أو محددة الموقع على المحور الدوار. كل شق يمثل زاوية معينة أو جزءًا من الدورة.
2.  **تثبيت المقطع الضوئي:** يتكون المقطع الضوئي من مصدر ضوء (مثل دايود باعث للضوء) ومستقبل ضوئي (مثل ترانزستور ضوئي) متقابلين، تفصل بينهما فجوة. يُثبت المقطع الضوئي بحيث يمر القرص المشفر عبر هذه الفجوة أثناء دورانه.
3.  **توليد النبضات:** عندما يدور المحور، يمر القرص المشفر عبر المقطع الضوئي.
    *   عندما يكون جزء معتم من القرص بين المصدر والمستقبل، يُحجب الضوء، ولا ينتج المستقبل إشارة كهربائية (أو تكون الإشارة منخفضة).
    *   عندما يمر أحد الشقوق أمام المقطع الضوئي، يسمح للضوء بالوصول من المصدر إلى المستقبل. هذا الضوء الساقط على المستقبل يجعله ينتج نبضة كهربائية.
4.  **تحديد الوضع:** يتم عد هذه النبضات الكهربائية المتولدة بواسطة دائرة إلكترونية أو معالج دقيق. عدد النبضات (أو تسلسلها إذا كانت الشقوق مبرمجة بشكل فريد) يتناسب مباشرة مع الزاوية التي دارها المحور. بهذه الطريقة، يمكن تحديد الوضع الزاوي للمحور بدقة.

---

**٧-٧ ما هي أنواع أجهزة الإحساس الضوئية المتكاملة؟**

أجهزة الإحساس الضوئية المتكاملة هي وحدات تحتوي عادةً على مصدر للضوء ومستشعر ضوئي في نفس الحزمة. النوعان الرئيسيان اللذان يُشار إليهما غالبًا هما:
1.  **نموذج المقطع الضوئي (Slotted Optical Switch / Interrupter Module):** يكون فيه مصدر الضوء والمستشعر متقابلين تفصل بينهما فجوة. يُستخدم لاكتشاف مرور جسم عبر هذه الفجوة.
2.  **نموذج العاكس الضوئي (Reflective Optical Switch / Reflective Module):** يكون فيه مصدر الضوء والمستشعر متجاورين وموجهين في نفس الاتجاه. يُستخدم لاكتشاف وجود جسم عاكس للضوء أمام الوحدة.

---

**حل السؤال ٧-٨: "صمم دائرة توظف خلية ذو موصلية ضوئية كأداة إنذار للخطر في مستوى شدة الضوء. عندما تصل شدة الضوء إلى ١٠ لومنا/م٢ ، تطلق أداة الإنذار جهد قدرة ٥ فولت. سوف يزداد الجهد مع شدة الضوء (تبدي هذه الخلية مقاومة قدرها ٢٣ كيلو أوم عندما تكون شدة الضوء ١٠ لومنا/م٢)."**

**فهم المتطلبات:**
*   **المستشعر:** خلية ذو موصلية ضوئية (LDR). مقاومتها تقل بزيادة شدة الضوء.
*   **نقطة التشغيل:** عند شدة ضوء ١٠ لومنا/م²، مقاومة LDR هي ٢٣ كيلو أوم.
*   **خرج الإنذار:** عند ١٠ لومنا/م² (أو أكثر)، يجب أن "تطلق أداة الإنذار جهد قدرة ٥ فولت".
*   **سلوك الدائرة:** جهد خرج الدائرة الوسيطة (قبل الإنذار النهائي) يجب أن "يزداد مع شدة الضوء".

**التصميم المقترح:**

1.  **مرحلة مجزئ الجهد (لتوليد جهد يتناسب مع شدة الضوء):**
    *   نستخدم مصدر جهد ثابت (ليكن Vcc = ٩ فولت).
    *   نوصل الخلية الضوئية (R_LDR) على التوالي مع مقاومة ثابتة (R_fixed).
    *   لكي يزداد جهد الخرج (V_out) مع زيادة شدة الضوء (أي مع نقصان R_LDR)، نأخذ الخرج V_out عبر المقاومة الثابتة R_fixed، وتكون R_LDR بين Vcc و V_out.
        الصيغة: V_out = Vcc * [R_fixed / (R_LDR + R_fixed)]
    *   لتحديد R_fixed: نريد أن يكون V_out قيمة محددة (لتشغيل المقارن) عندما R_LDR = ٢٣ ك.أوم. لنفترض أننا نريد V_out = ٤.٥ فولت عند نقطة التشغيل هذه (كقيمة مرجعية للمقارن).
        ٤.٥ فولت = ٩ فولت * [R_fixed / (٢٣ ك.أوم + R_fixed)]
        ٠.٥ = R_fixed / (٢٣ + R_fixed)
        ٠.٥ * (٢٣ + R_fixed) = R_fixed
        ١١.٥ + ٠.٥ * R_fixed = R_fixed
        ١١.٥ = ٠.٥ * R_fixed
        R_fixed = ٢٣ كيلو أوم.
    *   إذن، عند شدة ضوء ١٠ لومنا/م² (R_LDR = ٢٣ ك.أوم)، سيكون V_out = ٤.٥ فولت.
    *   إذا زادت شدة الضوء، ستقل R_LDR، وبالتالي سيزداد V_out (مثلاً، إذا R_LDR = ١٠ ك.أوم، V_out = ٩ * [٢٣ / (١٠ + ٢٣)] ≈ ٦.٢٧ فولت).

2.  **مرحلة المقارنة (لتشغيل الإنذار):**
    *   نستخدم مكبر عمليات في وضع المقارن (Comparator).
    *   يُوصل V_out (من مجزئ الجهد) بالمدخل غير العاكس (+) للمقارن.
    *   يُوصل جهد مرجعي (V_ref = ٤.٥ فولت) بالمدخل العاكس (-) للمقارن. (يمكن الحصول على V_ref باستخدام مجزئ جهد ثابت آخر أو زينر دايود).
    *   عندما تكون V_out > V_ref (أي عندما تصل شدة الضوء إلى ١٠ لومنا/م² أو تزيد)، يصبح خرج المقارن مرتفعًا (High).

3.  **مرحلة إطلاق جهد الإنذار (٥ فولت):**
    *   يمكن أن يكون خرج المقارن المرتفع هو نفسه إشارة "إطلاق جهد ٥ فولت" إذا كان المقارن يعمل على تغذية ٥ فولت وله خرج متوافق.
    *   بدلاً من ذلك، يمكن لخرج المقارن المرتفع أن يشغل ترانزستور كمفتاح، وهذا المفتاح بدوره يشغل دائرة تولد أو تمرر جهد ٥ فولت كإشارة إنذار.

**وصف مبسط للدائرة:**
دائرة مجزئ جهد تتكون من مصدر ٩ فولت، وخلية LDR موصلة بمقاومة ثابتة ٢٣ كيلو أوم (الخرج يؤخذ عبر المقاومة الثابتة). خرج هذا المجزئ (V_out) يُقارن بجهد مرجعي ٤.٥ فولت باستخدام مقارن. عندما يتجاوز V_out قيمة ٤.٥ فولت، يُصدر المقارن إشارة مرتفعة، وهذه الإشارة تُستخدم لتفعيل آلية تطلق جهد إنذار قدره ٥ فولت.

---

**حل السؤال ٧-٩: "يوضح الشكل دائرة استخدمت خلية ضوئية، استنتج علاقة جهد الخرج الدالة في مقاومة الخلية الضوئية."**

بافتراض أن الشكل يمثل مكبر عمليات في توصيلة مكبر غير عاكس قياسية، حيث:
*   الخلية الضوئية (R_ضوئي) والمقاومة الثابتة (٣ كيلو أوم) تشكلان مجزئ جهد يغذي المدخل غير العاكس (+). مصدر الجهد لهذا المجزئ هو (ف.دخل = +٢ فولت).
*   الجهد على المدخل غير العاكس (+V_in) هو: +V_in = ٢ فولت * [٣ ك.أوم / (R_ضوئي + ٣ ك.أوم)] = ٦ / (R_ضوئي + ٣).
*   يوجد تغذية خلفية من خرج المكبر (ف.خرج) إلى المدخل العاكس (-) عبر مقاومة تغذية خلفية (R_f = ٢٣ كيلو أوم).
*   يوجد مقاومة (R1 = ٣ كيلو أوم) موصولة من المدخل العاكس (-) إلى الأرضي.

العلاقة لجهد خرج مكبر غير عاكس هي:
ف.خرج = (+V_in) * [١ + (R_f / R1)]

بالتعويض بالقيم:
ف.خرج = [٦ / (R_ضوئي + ٣)] * [١ + (٢٣ ك.أوم / ٣ ك.أوم)]
ف.خرج = [٦ / (R_ضوئي + ٣)] * [١ + ٢٣/٣]
ف.خرج = [٦ / (R_ضوئي + ٣)] * [(٣+٢٣)/٣]
ف.خرج = [٦ / (R_ضوئي + ٣)] * [٢٦/٣]
ف.خرج = (٦ * ٢٦) / [٣ * (R_ضوئي + ٣)]
ف.خرج = ١٥٦ / [٣ * (R_ضوئي + ٣)]
**ف.خرج = ٥٢ / (R_ضوئي + ٣)**

حيث R_ضوئي تُقاس بالكيلو أوم، وف.خرج يُقاس بالفولت.

---

**حل السؤال ٧-١٠: "استنتج دائرة تعمل كمكيف إشارة الذي يعد بإشارة جهد من صفر إلى ٥ فولت حيث شدة الضوء تقاس بواسطة خلية ضوئية وتتراوح شدة الضوء من ٤ إلى ١٠ لومنا/م٢."**

**الهدف:** تصميم دائرة (مكيف إشارة) بحيث:
*   عند شدة ضوء (س) = ٤ لومنا/م²، يكون جهد الخرج (ف.خرج) = ٠ فولت.
*   عند شدة ضوء (س) = ١٠ لومنا/م²، يكون جهد الخرج (ف.خرج) = ٥ فولت.
نفترض علاقة خطية: ف.خرج = أ * س + ب

1.  **إيجاد معادلة الخط المستقيم:**
    *   باستخدام النقطة (٤، ٠): ٠ = ٤أ + ب  =>  ب = -٤أ
    *   باستخدام النقطة (١٠، ٥): ٥ = ١٠أ + ب
    بالتعويض عن 'ب': ٥ = ١٠أ - ٤أ  =>  ٥ = ٦أ  =>  أ = ٥/٦
    إذن، ب = -٤ * (٥/٦) = -٢٠/٦ = -١٠/٣

    المعادلة هي: **ف.خرج = (٥/٦)س - (١٠/٣)**

2.  **تصميم الدائرة:**
    نحتاج إلى دائرة تقوم بالعمليات التالية:
    *   **تحويل شدة الضوء (س) إلى جهد (V_s):** هذه هي وظيفة الخلية الضوئية ومقاومة مرتبطة بها (مثلاً في مجزئ جهد). يجب أن يكون V_s متناسباً مع 'س'. لنفترض أننا صممنا هذه المرحلة بحيث V_s = ك * س (حيث 'ك' ثابت معايرة).
    *   **تطبيق الكسب (Scaling):** نحتاج إلى ضرب V_s في معامل معين.
    *   **تطبيق الإزاحة (Offset):** نحتاج إلى طرح قيمة ثابتة (١٠/٣ فولت بعد أخذ الكسب في الاعتبار).

    يمكن تحقيق ذلك باستخدام مكبرات عمليات. دائرة شائعة لمثل هذه الوظيفة هي **مكبر الفرق (Differential Amplifier)** أو **مكبر التجميع (Summing Amplifier)**.

    **باستخدام مبدأ مكبر الفرق:**
    ف.خرج = G * (V_input_signal - V_offset_reference)
    حيث G هو الكسب الكلي.
    V_input_signal هو الجهد المتناسب مع 'س'.
    V_offset_reference هو جهد مرجعي يمثل الإزاحة.

    لنفترض أننا صممنا مرحلة استشعار الضوء بحيث تعطي جهدًا V_s يتراوح من V_s_min (عند ٤ لومنا/م²) إلى V_s_max (عند ١٠ لومنا/م²).
    المعادلة ف.خرج = (٥/٦)س - (١٠/٣) يمكن إعادة كتابتها لتعمل على إشارة جهد V_s بدلاً من 'س' مباشرة.
    نحتاج إلى مرحلة تحول مدى (V_s_min إلى V_s_max) إلى مدى (٠ فولت إلى ٥ فولت).

    **مثال لتصميم مبسط (يتطلب معايرة دقيقة لمرحلة الاستشعار):**
    1.  **مرحلة الاستشعار:** صمم مجزئ جهد باستخدام الخلية الضوئية بحيث ينتج جهد V_s يتغير خطيًا مع 'س' في المدى المطلوب.
    2.  **مرحلة الإزاحة والطرح:** استخدم مكبر عمليات في وضع الطرح. أحد المداخل سيكون V_s (أو نسخة مكبرة منه)، والمدخل الآخر سيكون جهدًا مرجعيًا ثابتًا.
    3.  **مرحلة ضبط الكسب:** يتم ضبط مقاومات المكبر لتحقيق الكسب (٥/٦) على الجزء المتغير (المتعلق بـ 'س') والإزاحة النهائية (-١٠/٣ فولت).

    **كمثال توضيحي لفكرة الدائرة باستخدام مكبر تجميع معكوس ثم مكبر معكوس آخر (لتصحيح الإشارة):**
    *   **المرحلة 1 (مكبر تجميع معكوس):**
        V_out1 = - [ (R_f1/R_s) * V_s + (R_f1/R_ref) * V_ref_positive ]
        حيث V_s هو الجهد من مستشعر الضوء، و V_ref_positive هو جهد موجب يهدف إلى خلق الإزاحة السالبة بعد قلب الإشارة.
    *   **المرحلة 2 (مكبر معكوس لضبط الكسب النهائي وتصحيح الإشارة):**
        ف.خرج = - (R_f2/R_in2) * V_out1

    يتم اختيار قيم المقاومات (R_f1, R_s, R_ref, R_f2, R_in2) وقيمة V_ref_positive بعناية لتحقيق المعادلة النهائية ف.خرج = (٥/٦)س - (١٠/٣) بعد ربط 'س' بـ V_s.

    يتطلب التصميم الدقيق لهذه الدائرة معرفة العلاقة الدقيقة بين مقاومة الخلية الضوئية وشدة الضوء 'س' في المدى من ٤ إلى ١٠ لومنا/م²، ثم تصميم مراحل التكييف بناءً على ذلك. الفكرة الأساسية هي تحقيق الكسب الخطي والإزاحة المطلوبة.